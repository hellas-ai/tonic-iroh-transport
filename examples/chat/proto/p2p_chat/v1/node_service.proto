syntax = "proto3";

package p2p_chat.v1;

import "p2p_chat/v1/common.proto";

// Node discovery and health service
service NodeService {
  // Get information about this node
  rpc GetNodeInfo(GetNodeInfoRequest) returns (GetNodeInfoResponse);

  // Ping for connectivity testing
  rpc Ping(PingRequest) returns (PingResponse);

  // List connected peers
  rpc ListPeers(ListPeersRequest) returns (ListPeersResponse);

  // Shutdown the node gracefully
  rpc Shutdown(ShutdownRequest) returns (ShutdownResponse);
}

// Request/response messages
message GetNodeInfoRequest {}

message GetNodeInfoResponse {
  string node_id = 1;
  repeated string addresses = 2;
  string version = 3;
  int64 uptime_seconds = 4;
  int32 connected_peers = 5;
}

message PingRequest {
  int64 timestamp = 1;
  string data = 2;
}

message PingResponse {
  int64 request_timestamp = 1;
  int64 response_timestamp = 2;
  string echo_data = 3;
}

message ListPeersRequest {}

message ListPeersResponse {
  repeated PeerInfo peers = 1;
}

message ShutdownRequest {}

message ShutdownResponse {}
